<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>bmy</title>
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/style.css">
	<link href="static/css/bootstrap.min.css" rel="stylesheet" media="screen">
</head>
<body>
	<div id="login-box" class="popup form-signin">
		<span class="bpopup-button b-close"><span>X</span></span>
		<div id="login-form">
			<input class="form-control input-lg" autofocus="" id="username" type="text" placeholder="用户名">
			<input class="form-control input-lg" id="password" type="password" placeholder="密码">
			<label><input id="chk_remember" type="checkbox">记住我</label>
			<button id="btn-login" class="btn btn-primary btn-lg btn-block" type="submit">登录</button>
		</div>
	</div>

	<!-- templates -->
	<script type="text/x-handlebars" data-template-name="article">
	</script>

	<script type="text/x-handlebars" data-template-name="board">
		{{#if is_loaded_board}}
			{{board-header board=board}}
			{{#if hasHotItems}}
				{{board-hotitems hot_topics=board.hot_topic}}
			{{/if}}
			{{board-toolbar data=this}}
		{{/if}}

		{{#if is_loaded_articlelist}}
			{{article-list articles=articles}}
		{{/if}}

		{{#if is_loaded_boardtop}}
			{{article-list articles=boardtop}}
		{{/if}}
	</script>

	<script type="text/x-handlebars" data-template-name="articleRead">
		{{#if is_loaded_board}}
			{{board-header board=board}}
		{{/if}}

		{{#if is_loaded_article}}
			{{article-toolbar article=article}}
			{{article-content article=article}}
		{{/if}}
	</script>

	<script type="text/x-handlebars" data-template-name="articlePost">
		{{#if is_loaded_board}}
			{{board-header board=board}}
		{{/if}}

		{{#if is_loaded_article}}
			{{#with article}}
		<div id="post-box">
			<div id="post-form" class="float-left">
			{{input id="article-title" type="text" value=title class="form-control input-lg" autofocus="" placeholder="标题"}}
			{{textarea value=content class="form-control" id="article-content" rows="20" placeholder="想和小陶人们说点什么呢？"}}
			<button {{action 'doneEditing'}} id="btn-post" class="btn btn-primary btn-lg">完成</button>
			<p>
				{{input type="hidden" id="post_ref" value=ref}}
				{{input type="hidden" id="post_rid" value=rid}}
				{{input type="hidden" id="post_board" value=board}}
				{{input type="hidden" id="post_thread" value=thread}}
				{{input type="hidden" id="post_type" value=type}}
			</p>
			</div>

			<div id="post-tips" class="float-right alert alert-info">
				<h4>编辑提示</h4>
				<p>bla bla bla</p>
				<ul>
					<li>[ESC][0;31m红色[ESC][0m</li>
					<li>[ESC][0;32m绿色[ESC][0m</li>
				</ul>
				<p>bla bla bla</p>
				<p>bla bla bla</p>
				<p>bla bla bla</p>
			</div>

			<div class="clear"></div>
		</div>
			{{/with}}
		{{/if}}
	</script>

	<script type="text/x-handlebars" data-template-name="articleReply">
		{{#if is_loaded_board}}
		{{board-header board=board}}
		{{/if}}

		{{#if is_loaded_article}}
		{{#with article}}
		<div id="post-box">
			<div id="post-form" class="float-left">
				{{input id="article-title" type="text" value=title class="form-control input-lg" autofocus="" placeholder="标题"}}
				{{textarea value=content class="form-control" id="article-content" rows="20" placeholder="想和小陶人们说点什么呢？"}}
				<button {{action 'doneEditing'}} id="btn-post" class="btn btn-primary btn-lg">完成</button>
				<p>
					{{input type="hidden" id="post_ref" value=ref}}
					{{input type="hidden" id="post_rid" value=rid}}
					{{input type="hidden" id="post_board" value=board}}
					{{input type="hidden" id="post_thread" value=thread}}
					{{input type="hidden" id="post_type" value=type}}
				</p>
			</div>

			<div id="post-tips" class="float-right alert alert-info">
				<h4>编辑提示</h4>
				<p>bla bla bla</p>
				<ul>
					<li>[ESC][0;31m红色[ESC][0m</li>
					<li>[ESC][0;32m绿色[ESC][0m</li>
				</ul>
				<p>bla bla bla</p>
				<p>bla bla bla</p>
				<p>bla bla bla</p>
			</div>

			<div class="clear"></div>
		</div>
		{{/with}}
		{{/if}}
	</script>

	<!-- components -->
	<script type="text/x-handlebars" id="components/thread-list">
		<table class="table table-striped table-condensed">
			{{#each articles}}
			<tr>
				<td>num</td>
				<td>{{title}}</td>
				<td>{{author}}</td>
				<td>{{BMYTime tid}}</td>
				<td>{{th_num}}</td>
			</tr>
			{{/each}}
		</table>
	</script>

	<script type="text/x-handlebars" id="components/board-hotitems">
		<section id="board-hot">
		{{#each hot_topics}}
			<div class="hot-item">
				<div>HOT</div>
				<a href="#">{{title}}</a>
				<span class="hot-data">{{BMYTime tid}}</span>
			</div>
		{{/each}}
		</section>
	</script>

	<script type="text/x-handlebars" id="components/board-toolbar">
		{{log 'all: ' this}}
		<div class="bmy-toolbar">
			<div id="board-publish" class="dropdown">
				<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">发表文章 <span class="caret"></span></button>
				<ul class="dropdown-menu" role="menu">
					<li>{{BMYBoardNewLink data.board}}</li>
					<li><a href="#">模板发文</a></li>
				</ul>
			</div>

			<div id="board-list-mode" class="btn-group">
				{{#if data.thread_mode}}
				<button {{action 'normalMode'}} type="button" class="btn btn-default">一般模式</button>
				<button type="button" class="btn btn-default" disabled="disabled">主题模式</button>
				{{else}}
				<button type="button" class="btn btn-default" disabled="disabled">一般模式</button>
				<button {{action 'threadMode'}} type="button" class="btn btn-default">主题模式</button>
				{{/if}}
			</div>

			<div id="top-list-mode" class="btn-group">
				<button type="button" class="btn btn-default">置顶</button>
				<button type="button" class="btn btn-default" disabled="disabled">置底</button>
			</div>

			<div id="board-paging" class="float-right">
				<span>{{BMYBoardPageLink data.board}}</span>
				<form class="form-inline" role="form">
					<div class="form-group"><input type="text" class="form-control"></div>
					<span class="btn btn-default">&gt;</span>
				</form>
				<span>{{data.board.paging.page}} / {{data.board.paging.pages}}</span>
			</div>
		</div>
	</script>

	<script type="text/x-handlebars" id="components/article-toolbar">

	</script>

	<script type="text/x-handlebars" id="components/article-content">
		<section id="bmy-articles">
		<div class='article-item'>
			<div class='float-left article-author-info'>
				<div class='article-author'><span class="glyphicon glyphicon-user user-icon"></span>{{article.author}}</div>
				<div class='article-author-func'>
					<a class='sendmail-btn' href="#">发送站内信</a>
					<a class='addfriend-btn' href="#">加为好友</a>
				</div>
			</div>

			<div class='float-right article-main'>
				<div class='article-title'>
					<div class='float-left'>{{article.title}}</div>
					<div class='float-right btn-group'>
						{{BMYArticleReplyLink}}
						<button type='button' class='btn btn-default dropdown-toggle' data-toggle="dropdown">
							<span class='caret'></span>
							<span class='sr-only'>Toggle Dropdown</span>
						</button>
						<ul class='dropdown-menu' role='menu'>
							<li><a href='#'>同主题由此展开</a></li>
							<li class='divider'></li>
							<li><a href='#'>同主题列表</a></li>
							<li><a href='#'>同主题从主楼展开</a></li>
						</ul>
					</div>
					<div class="clear"></div>
				</div>
				<div class='article-body'>{{BMYArticleContent article.content}}</div>
			</div>

			<div class='clear'></div>
		</div>
		</section>
	</script>

	<script type="text/x-handlebars" id="components/article-edit">

	</script>

	<script src="static/js/jquery-1.10.2.min.js"></script>
	<script src="static/js/jquery.simple.inheritance.js"></script>
	<script src="static/js/jquery.bpopup.min.js"></script>
	<script src="static/js/handlebars-1.3.0.js"></script>
	<script src="static/js/ember-1.8.1.min.js"></script>
	<script src="static/js/bootstrap.min.js"></script>
	<script src="static/js/moment-with-langs.min.js"></script>
	<script src="js/app.js"></script>
	<script src="js/init.js"></script>
</body>
</html>
